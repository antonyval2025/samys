GUÃA RÃPIDA - SISTEMA CON PERSISTENCIA DE BASE DE DATOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## CAMBIO REALIZADO

Se implementÃ³ un sistema de persistencia de datos basado en BASE DE DATOS SQLite
en lugar de localStorage del navegador.

### Â¿QUÃ‰ SIGNIFICA ESTO?

ANTES:
âŒ Los datos se guardaban en localStorage del navegador
âŒ Si limpias cachÃ© o cierras en incÃ³gnito, se perdÃ­an
âŒ No funcionaba sin servidor

AHORA:
âœ… Los datos se guardan en un archivo: turnos_database.db
âœ… Los datos son permanentes e independientes del navegador
âœ… Funciona desde cualquier navegador/dispositivo
âœ… FÃ¡cil de hacer respaldo

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## CÃ“MO USAR

### PASO 1: Instalar dependencias (si no lo hizo ya)

En PowerShell:
pip install flask flask-cors

### PASO 2: Iniciar el servidor

OpciÃ³n A - Usar el script:
Ejecuta: iniciar.bat

OpciÃ³n B - Manual:
python servidor_turnos.py

### PASO 3: Acceder a la aplicaciÃ³n

Abre el navegador:
http://localhost:5001/

(Si el puerto 5001 no funciona, intenta: python servidor_turnos.py --port 5002)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## ESTRUCTURA

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Tu PC / Navegador                 â”‚
â”‚   nuevo_cuadrante_mejorado.html     â”‚ â—„â”€ Interfaz visual
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ Fetch HTTP
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Servidor Flask (5001)             â”‚
â”‚   servidor_turnos.py                â”‚ â—„â”€ API REST (/api/*)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ SQL Queries
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Base de Datos SQLite              â”‚
â”‚   turnos_database.db                â”‚ â—„â”€ DATOS PERMANENTES
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## RUTAS API

GET  /api/empleados              â†’ Obtener todos los empleados
POST /api/empleados              â†’ Crear empleado
PUT  /api/empleados/<id>         â†’ Actualizar empleado
DEL  /api/empleados/<id>         â†’ Eliminar empleado

GET  /api/turnos/<emp_id>?mes=X&anio=Y â†’ Obtener turnos
POST /api/turnos/<emp_id>               â†’ Guardar turnos

GET  /api/tipos-turno            â†’ Obtener tipos de turno

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## ARCHIVOS IMPORTANTES

turnos_database.db
  â””â”€ Base de datos SQLite con todos los datos
  â””â”€ Se crea automÃ¡ticamente
  â””â”€ Ubicada en: C:\Users\samys\OneDrive\Nueva Carpeta\

servidor_turnos.py
  â””â”€ Servidor Flask que maneja la API
  â””â”€ Conecta navegador con base de datos

nuevo_cuadrante_mejorado.html
  â””â”€ AplicaciÃ³n frontend
  â””â”€ Ahora hace llamadas a /api/* en lugar de usar localStorage

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## EJEMPLO: GUARDAR UN EMPLEADO

1. Usuario llena formulario: Nombre, Email, etc.
2. Hace clic en "Guardar"
3. JavaScript valida datos
4. EnvÃ­a POST a: http://localhost:5001/api/empleados
   {
     "nombre": "MarÃ­a GarcÃ­a",
     "email": "maria@gmail.com",
     "telefono": "600123456",
     ...
   }
5. Servidor recibe y guarda en Base de Datos
6. Base de datos persiste datos â† Â¡IMPORTANTE!

Resultado: Los datos existen para siempre (mientras no elimines turnos_database.db)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## BACKUP Y RECUPERACIÃ“N

### Hacer backup:
1. Copia el archivo: turnos_database.db
2. GuÃ¡rdalo en USB o nube

### Restaurar desde backup:
1. DetÃ©n servidor: Ctrl+C
2. Elimina turnos_database.db actual
3. Copia tu backup en su lugar
4. Reinicia servidor

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## TROUBLESHOOTING

PROBLEMA: "Error: No se puede conectar a http://localhost:5001"
SOLUCIÃ“N:
  1. Verifica que el servidor estÃ¡ corriendo (deberÃ­a ver "Running on...")
  2. Abre F12 en el navegador â†’ Console
  3. Busca mensajes de error
  4. Intenta otro puerto: python servidor_turnos.py --port 5002

PROBLEMA: "turnos_database.db no se crea"
SOLUCIÃ“N:
  1. Verifica que tienes permisos de escritura en la carpeta
  2. Ejecuta: python -c "import sqlite3; print('OK')"
  3. Revisa que Python 3.7+ estÃ¡ instalado

PROBLEMA: "Flask no estÃ¡ instalado"
SOLUCIÃ“N:
  pip install flask flask-cors

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## VENTAJAS DE ESTA ARQUITECTURA

âœ… Persistencia Real
   Los datos nunca se pierden (a menos que elimines el archivo)

âœ… SincronizaciÃ³n
   MÃºltiples usuarios/navegadores acceden a los mismos datos

âœ… Escalable
   FÃ¡cil migrar a MySQL, PostgreSQL o MongoDB

âœ… Respaldo
   Solo copia un archivo (turnos_database.db)

âœ… Seguridad
   Datos no dependen del cachÃ© del navegador

âœ… Sin lÃ­mites
   SQLite puede almacenar gigas de datos (a diferencia de localStorage: ~5MB)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## PRÃ“XIMOS PASOS

1. âœ… Instalar Flask (ya hecho)
2. âœ… Implementar API REST (ya hecho)
3. âœ… Integrar con HTML (ya hecho)
4. â†’ Inicia el servidor: python servidor_turnos.py
5. â†’ Accede: http://localhost:5001
6. â†’ Prueba: Agrega un empleado (se guardarÃ¡ en BD)
7. â†’ Verifica: Abre en otro navegador (el empleado sigue ahÃ­)

Â¡Listo! Ahora tienes persistencia de verdad ğŸ‰

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## MIGRACIÃ“N DESDE LOCALSTORAGE

Si tenÃ­as datos en localStorage antiguo:

1. Abre conectar_bd.html
2. Se conectarÃ¡ a la BD (vacÃ­a inicialmente)
3. Puedes copiar empleados antigos manualmente O
4. Usar el formulario para re-agregar los empleados

Los turnos se generarÃ¡n nuevamente automÃ¡ticamente.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## CONTACTO CON DATOS

Consultar datos de la BD directamente:

OpciÃ³n 1 - Desde navegador:
http://localhost:5001/api/empleados

OpciÃ³n 2 - Desde Python:
python -c "import sqlite3; conn = sqlite3.connect('turnos_database.db'); print(conn.execute('SELECT COUNT(*) FROM empleados').fetchone()[0], 'empleados')"

OpciÃ³n 3 - SQLite Browser (descargable):
https://sqlitebrowser.org/
  1. Abre turnos_database.db con SQLite Browser
  2. Explora las tablas

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

VersiÃ³n: 10.0
Fecha: 25 de diciembre de 2025
Status: âœ… IMPLEMENTADO Y PROBADO
