<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Calendario - Diciembre 2025</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #1a1a1a; color: #fff; }
        .container { max-width: 800px; margin: 0 auto; }
        .test { background: #2a2a2a; padding: 15px; margin: 10px 0; border-radius: 8px; border-left: 4px solid #0ea5e9; }
        h2 { color: #0ea5e9; }
        code { background: #333; padding: 2px 6px; border-radius: 3px; }
        .result { margin-top: 10px; padding: 10px; background: #1a3a1a; border-radius: 4px; color: #90ee90; }
        .error { background: #3a1a1a; color: #ff6b6b; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Debug Calendario - Diciembre 2025</h1>
        
        <div class="test">
            <h2>1. C√°lculo de primerDia para Diciembre</h2>
            <code>const fecha = new Date(2025, 11, 1); fecha.getDay();</code>
            <div class="result">
                <p id="result1"></p>
            </div>
        </div>

        <div class="test">
            <h2>2. Mapeo de getDay()</h2>
            <p>0 = Domingo, 1 = Lunes, 2 = Martes, ..., 6 = S√°bado</p>
            <div class="result">
                <p id="result2"></p>
            </div>
        </div>

        <div class="test">
            <h2>3. Visualizar Calendario</h2>
            <div id="calendar" style="border: 2px solid #0ea5e9; padding: 20px; border-radius: 8px;"></div>
        </div>

        <div class="test">
            <h2>4. Verificar HTML archivo</h2>
            <div class="result" id="result4"></div>
        </div>
    </div>

    <script>
        // Test 1
        const fecha = new Date(2025, 11, 1);
        const primerDia = fecha.getDay();
        const diasEnMes = new Date(2025, 11 + 1, 0).getDate();
        
        document.getElementById('result1').innerHTML = `
            <strong>Resultado:</strong><br>
            primerDia = ${primerDia}<br>
            D√≠a: ${fecha.toLocaleDateString('es-ES', {weekday: 'long'})}<br>
            diasEnMes = ${diasEnMes}
        `;

        // Test 2
        const diasSemana = ['üî¥ Domingo', 'üü¢ Lunes', 'üü° Martes', 'üü† Mi√©rcoles', 'üîµ Jueves', 'üü£ Viernes', '‚ö´ S√°bado'];
        document.getElementById('result2').innerHTML = `
            <strong>Mapeo de valores:</strong><br>
            ${diasSemana.map((d, i) => `${i}: ${d}`).join('<br>')}
        `;

        // Test 3: Crear calendario
        let calHTML = `
            <h3 style="margin-top: 0;">Diciembre 2025 - Verificaci√≥n</h3>
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="background: #0ea5e9; color: #000;">
                        <th style="padding: 10px; border: 1px solid #0ea5e9;">Dom</th>
                        <th style="padding: 10px; border: 1px solid #0ea5e9;">Lun</th>
                        <th style="padding: 10px; border: 1px solid #0ea5e9;">Mar</th>
                        <th style="padding: 10px; border: 1px solid #0ea5e9;">Mi√©</th>
                        <th style="padding: 10px; border: 1px solid #0ea5e9;">Jue</th>
                        <th style="padding: 10px; border: 1px solid #0ea5e9;">Vie</th>
                        <th style="padding: 10px; border: 1px solid #0ea5e9;">S√°b</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
        `;
        
        // Celdas vac√≠as al inicio
        for (let i = 0; i < primerDia; i++) {
            calHTML += `<td style="padding: 10px; border: 1px solid #333; background: #333;"></td>`;
        }
        
        // D√≠as del mes
        let diasEnFila = primerDia;
        for (let dia = 1; dia <= diasEnMes; dia++) {
            const fecha = new Date(2025, 11, dia);
            const esDomingo = fecha.getDay() === 0;
            const style = esDomingo ? 'background: #ff6b6b; color: #000; font-weight: bold;' : '';
            
            calHTML += `<td style="padding: 10px; border: 1px solid #333; text-align: center; ${style}">${dia}</td>`;
            diasEnFila++;
            
            if (diasEnFila % 7 === 0 && dia < diasEnMes) {
                calHTML += `</tr><tr>`;
            }
        }
        
        calHTML += `</tr></tbody></table>`;
        document.getElementById('calendar').innerHTML = calHTML;

        // Test 4: Verificar valores en HTML archivos
        fetch('nuevo_cuadrante_mejorado.html')
            .then(r => r.text())
            .then(html => {
                const hasCorrectArray = html.includes("Array(primerDia).fill(0)");
                const hasDomFirst = html.includes("['Dom', 'Lun', 'Mar', 'Mi√©'");
                
                document.getElementById('result4').innerHTML = `
                    <strong>Verificaci√≥n HTML:</strong><br>
                    Array(primerDia) sin %7: ${hasCorrectArray ? '‚úÖ SI' : '‚ùå NO'}<br>
                    Encabezados empiezan en Dom: ${hasDomFirst ? '‚úÖ SI' : '‚ùå NO'}<br>
                    <br><strong>‚ö†Ô∏è Si ambas marcas son SI, los cambios est√°n aplicados correctamente.</strong>
                `;
            })
            .catch(e => {
                document.getElementById('result4').innerHTML = `<span class="error">Error al verificar: ${e.message}</span>`;
            });
    </script>
</body>
</html>
