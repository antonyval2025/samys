<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Test - Soporte Multi-Local</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .result { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background-color: #d4edda; color: #155724; }
        .error { background-color: #f8d7da; color: #721c24; }
        pre { background: #f5f5f5; padding: 10px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>Test - Validar M√≥dulo soporte-multilocal.js</h1>
    <div id="results"></div>

    <!-- Cargar m√≥dulos -->
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="js/modules.js"></script>
    <script src="js/balanceo-y-restricciones.js"></script>
    <script src="js/reportes-y-prediccion.js"></script>
    <script src="js/soporte-multilocal.js"></script>

    <script>
        const resultsDiv = document.getElementById('results');

        function addResult(title, success, message) {
            const div = document.createElement('div');
            div.className = `result ${success ? 'success' : 'error'}`;
            div.innerHTML = `<strong>${title}</strong>: ${message}`;
            resultsDiv.appendChild(div);
        }

        // Tests
        window.addEventListener('load', () => {
            console.log('=== INICIANDO TESTS ===');

            // Test 1: ¬øExiste GestorLocales?
            try {
                if (typeof GestorLocales !== 'undefined') {
                    addResult('‚úÖ GestorLocales existe', true, 'Clase GestorLocales est√° definida');
                } else {
                    addResult('‚ùå GestorLocales NO existe', false, 'Clase GestorLocales no est√° definida');
                }
            } catch (e) {
                addResult('‚ùå Error verificando GestorLocales', false, e.message);
            }

            // Test 2: ¬øExiste GestorDepartamentos?
            try {
                if (typeof GestorDepartamentos !== 'undefined') {
                    addResult('‚úÖ GestorDepartamentos existe', true, 'Clase GestorDepartamentos est√° definida');
                } else {
                    addResult('‚ùå GestorDepartamentos NO existe', false, 'Clase GestorDepartamentos no est√° definida');
                }
            } catch (e) {
                addResult('‚ùå Error verificando GestorDepartamentos', false, e.message);
            }

            // Test 3: ¬øExiste ConsolidadorReportes?
            try {
                if (typeof ConsolidadorReportes !== 'undefined') {
                    addResult('‚úÖ ConsolidadorReportes existe', true, 'Clase ConsolidadorReportes est√° definida');
                } else {
                    addResult('‚ùå ConsolidadorReportes NO existe', false, 'Clase ConsolidadorReportes no est√° definida');
                }
            } catch (e) {
                addResult('‚ùå Error verificando ConsolidadorReportes', false, e.message);
            }

            // Test 4: ¬øTiene GestorLocales.mostrarModalGesti√≥n()?
            try {
                if (typeof GestorLocales.mostrarModalGesti√≥n === 'function') {
                    addResult('‚úÖ mostrarModalGesti√≥n() en GestorLocales', true, 'M√©todo existe y es una funci√≥n');
                } else {
                    addResult('‚ùå mostrarModalGesti√≥n() NO es funci√≥n', false, `Tipo: ${typeof GestorLocales.mostrarModalGesti√≥n}`);
                }
            } catch (e) {
                addResult('‚ùå Error verificando mostrarModalGesti√≥n', false, e.message);
            }

            // Test 5: ¬øTiene GestorDepartamentos.mostrarModalGesti√≥n()?
            try {
                if (typeof GestorDepartamentos.mostrarModalGesti√≥n === 'function') {
                    addResult('‚úÖ mostrarModalGesti√≥n() en GestorDepartamentos', true, 'M√©todo existe y es una funci√≥n');
                } else {
                    addResult('‚ùå mostrarModalGesti√≥n() NO es funci√≥n', false, `Tipo: ${typeof GestorDepartamentos.mostrarModalGesti√≥n}`);
                }
            } catch (e) {
                addResult('‚ùå Error verificando mostrarModalGesti√≥n en GestorDepartamentos', false, e.message);
            }

            // Test 6: ¬øTiene GestorLocales.inicializarLocales()?
            try {
                if (typeof GestorLocales.inicializarLocales === 'function') {
                    addResult('‚úÖ inicializarLocales() en GestorLocales', true, 'M√©todo existe y es una funci√≥n');
                } else {
                    addResult('‚ùå inicializarLocales() NO es funci√≥n', false, `Tipo: ${typeof GestorLocales.inicializarLocales}`);
                }
            } catch (e) {
                addResult('‚ùå Error verificando inicializarLocales', false, e.message);
            }

            // Test 7: ¬øTiene GestorLocales.actualizarSelectLocal()?
            try {
                if (typeof GestorLocales.actualizarSelectLocal === 'function') {
                    addResult('‚úÖ actualizarSelectLocal() en GestorLocales', true, 'M√©todo existe y es una funci√≥n');
                } else {
                    addResult('‚ùå actualizarSelectLocal() NO es funci√≥n', false, `Tipo: ${typeof GestorLocales.actualizarSelectLocal}`);
                }
            } catch (e) {
                addResult('‚ùå Error verificando actualizarSelectLocal', false, e.message);
            }

            // Test 8: ¬øTiene GestorLocales propiedades est√°ticas?
            try {
                if (GestorLocales.locales && Array.isArray(GestorLocales.locales)) {
                    addResult('‚úÖ GestorLocales.locales existe', true, `Array con ${GestorLocales.locales.length} locales`);
                } else {
                    addResult('‚ùå GestorLocales.locales NO existe', false, 'Propiedad no est√° definida o no es un array');
                }
            } catch (e) {
                addResult('‚ùå Error verificando locales', false, e.message);
            }

            addResult('üéâ TESTS COMPLETADOS', true, 'Revisi√≥n finalizada');
            console.log('=== TESTS COMPLETADOS ===');
        });
    </script>
</body>
</html>
