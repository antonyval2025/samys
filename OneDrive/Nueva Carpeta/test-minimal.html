<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Test Minimal</title>
</head>
<body>
    <h1>Test Minimal - Verificación Básica</h1>
    <div id="output"></div>

    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="js/modules.js"></script>
    <script src="js/balanceo-y-restricciones.js"></script>
    <script src="js/reportes-y-prediccion.js"></script>
    <script src="js/soporte-multilocal.js"></script>

    <script>
        const output = document.getElementById('output');
        
        function print(text) {
            output.innerHTML += text + '<br>';
        }

        window.addEventListener('load', () => {
            print('=== VERIFICACIÓN BÁSICA ===');
            
            try {
                print(`GestorLocales: ${typeof GestorLocales}`);
                print(`GestorDepartamentos: ${typeof GestorDepartamentos}`);
                print(`ConsolidadorReportes: ${typeof ConsolidadorReportes}`);
                print(`AppState.userRole: ${AppState.userRole}`);
                print(`AppState.canEditShifts(): ${AppState.canEditShifts()}`);
                print(`GestorLocales.locales.length: ${GestorLocales.locales.length}`);
                print(`GestorLocales.localActualId: ${GestorLocales.localActualId}`);
                
                print('');
                print('=== INTENTANDO LLAMAR mostrarModalGestión ===');
                GestorLocales.mostrarModalGestión();
                print('✓ Función ejecutada');
                
                setTimeout(() => {
                    const modal = document.getElementById('modalGestionLocales');
                    if (modal) {
                        print('✓ Modal encontrado en el DOM');
                        print(`  - Display: ${window.getComputedStyle(modal).display}`);
                        print(`  - Visible: ${modal.offsetParent !== null ? 'Sí' : 'No'}`);
                    } else {
                        print('✗ Modal NO encontrado en el DOM');
                    }
                }, 100);
                
            } catch (e) {
                print(`ERROR: ${e.message}`);
                print(`Stack: ${e.stack}`);
            }
        });
    </script>

    <style>
        #output {
            background: #f0f0f0;
            padding: 20px;
            margin: 20px;
            border: 1px solid #ccc;
            font-family: monospace;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
    </style>
</body>
</html>
