<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Debug Tests - Verificar Errores</title>
    <style>
        body { font-family: monospace; background: #1e1e1e; color: #d4d4d4; padding: 20px; }
        .error { color: #f48771; }
        .success { color: #6a9955; }
        .info { color: #569cd6; }
        .warning { color: #dcdcaa; }
        .console { background: #252526; padding: 15px; margin: 20px 0; border-radius: 5px; max-height: 400px; overflow-y: auto; }
        pre { margin: 10px 0; }
    </style>
</head>
<body>
    <h1>üîç Debug Console - Verificar Errores en Tests</h1>
    
    <div class="console" id="console"></div>
    
    <script>
        const logDiv = document.getElementById('console');
        
        // Capturar errores globales
        window.addEventListener('error', (e) => {
            logError(`UNCAUGHT ERROR: ${e.message} en ${e.filename}:${e.lineno}`);
        });
        
        // Capturar Promise rejections
        window.addEventListener('unhandledrejection', (e) => {
            logError(`UNHANDLED REJECTION: ${e.reason}`);
        });
        
        // Sobreescribir console
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;
        
        console.log = function(...args) {
            logInfo(args.join(' '));
            originalLog.apply(console, args);
        };
        
        console.error = function(...args) {
            logError(args.join(' '));
            originalError.apply(console, args);
        };
        
        console.warn = function(...args) {
            logWarn(args.join(' '));
            originalWarn.apply(console, args);
        };
        
        function logInfo(msg) {
            addLog(msg, 'info');
        }
        
        function logError(msg) {
            addLog('‚ùå ' + msg, 'error');
        }
        
        function logWarn(msg) {
            addLog('‚ö†Ô∏è ' + msg, 'warning');
        }
        
        function logSuccess(msg) {
            addLog('‚úÖ ' + msg, 'success');
        }
        
        function addLog(msg, type = 'info') {
            const pre = document.createElement('pre');
            pre.className = type;
            pre.textContent = msg;
            logDiv.appendChild(pre);
            logDiv.scrollTop = logDiv.scrollHeight;
        }
        
        // Verificar m√≥dulos
        logInfo('‚ïê‚ïê‚ïê INICIANDO VERIFICACI√ìN ‚ïê‚ïê‚ïê');
        logInfo('');
        
        // Test 1: Cargar m√≥dulos
        logInfo('üì¶ Cargando m√≥dulos...');
    </script>
    
    <!-- Cargar m√≥dulos uno a uno para detectar errores -->
    <script>
        try {
            logSuccess('Intentando cargar validador-datos.js...');
        } catch (e) {
            logError('Error cargando validador-datos: ' + e.message);
        }
    </script>
    <script src="js/validador-datos.js"></script>
    
    <script>
        if (typeof ValidadorDatos !== 'undefined') {
            logSuccess('‚úì ValidadorDatos cargado correctamente');
        } else {
            logError('‚úó ValidadorDatos NO EST√Å DISPONIBLE');
        }
    </script>
    
    <script>
        try {
            logSuccess('Intentando cargar auto-save.js...');
        } catch (e) {
            logError('Error cargando auto-save: ' + e.message);
        }
    </script>
    <script src="js/auto-save.js"></script>
    
    <script>
        if (typeof AutoSaveManager !== 'undefined') {
            logSuccess('‚úì AutoSaveManager cargado correctamente');
        } else {
            logError('‚úó AutoSaveManager NO EST√Å DISPONIBLE');
        }
    </script>
    
    <script>
        try {
            logSuccess('Intentando cargar tab-sync.js...');
        } catch (e) {
            logError('Error cargando tab-sync: ' + e.message);
        }
    </script>
    <script src="js/tab-sync.js"></script>
    
    <script>
        if (typeof TabSyncManager !== 'undefined') {
            logSuccess('‚úì TabSyncManager cargado correctamente');
        } else {
            logError('‚úó TabSyncManager NO EST√Å DISPONIBLE');
        }
        
        logInfo('');
        logInfo('‚ïê‚ïê‚ïê PRUEBAS SIMPLES ‚ïê‚ïê‚ïê');
        logInfo('');
        
        // Prueba 1: ValidadorDatos
        if (typeof ValidadorDatos !== 'undefined') {
            try {
                const resultado = ValidadorDatos.validarEmpleado({
                    nombre: 'Test',
                    email: 'test@test.com',
                    telefono: '123456789',
                    horasContrato: 160
                });
                logSuccess('ValidadorDatos.validarEmpleado() funciona');
                logInfo('Resultado: ' + JSON.stringify(resultado));
            } catch (e) {
                logError('ValidadorDatos.validarEmpleado() ERROR: ' + e.message);
            }
        } else {
            logError('ValidadorDatos no est√° cargado - no se puede probar');
        }
    </script>
</body>
</html>
