<!DOCTYPE html>
<html>
<head>
    <title>ğŸ”§ Test Directo TurnoManager</title>
    <style>
        body { font-family: monospace; background: #0f172a; color: #f1f5f9; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; }
        pre { background: #1e293b; padding: 15px; border-radius: 8px; overflow-x: auto; }
        button { padding: 10px 20px; margin: 5px; background: #10b981; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; }
        button:hover { background: #059669; }
        #output { margin-top: 20px; background: #1e293b; padding: 20px; border-radius: 8px; min-height: 300px; }
        .pass { color: #86efac; }
        .fail { color: #fca5a5; }
        .info { color: #93c5fd; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ Test Directo de TurnoManager</h1>
        
        <button onclick="testWindowTurnoManager()">1ï¸âƒ£ Ver window.TurnoManager</button>
        <button onclick="testFunctions()">2ï¸âƒ£ Listar funciones</button>
        <button onclick="testEsCuadranteVacio()">3ï¸âƒ£ Ejecutar esCuadranteVacio()</button>
        <button onclick="testModals()">4ï¸âƒ£ Ver modales</button>
        <button onclick="clearOutput()">ğŸ—‘ï¸ Limpiar</button>
        
        <div id="output"></div>
    </div>

    <script>
        function log(msg, type = 'info') {
            const output = document.getElementById('output');
            const span = document.createElement('div');
            const className = type === 'pass' ? 'pass' : type === 'fail' ? 'fail' : 'info';
            span.innerHTML = `<span class="${className}">${msg}</span>`;
            output.appendChild(span);
            output.scrollTop = output.scrollHeight;
        }

        function clearOutput() {
            document.getElementById('output').innerHTML = '';
        }

        function testWindowTurnoManager() {
            log('â•'.repeat(50), 'info');
            log('TEST: window.TurnoManager', 'info');
            log('â•'.repeat(50), 'info');
            
            if (typeof window.TurnoManager === 'object') {
                log(`âœ… window.TurnoManager EXISTS`, 'pass');
                log(`Type: ${typeof window.TurnoManager}`, 'pass');
                log(`Keys: ${Object.keys(window.TurnoManager).length}`, 'info');
                log(`${JSON.stringify(Object.keys(window.TurnoManager), null, 2)}`, 'info');
            } else {
                log(`âŒ window.TurnoManager NO EXISTS`, 'fail');
                log(`Type: ${typeof window.TurnoManager}`, 'fail');
                log('Valor:', 'fail');
                log(JSON.stringify(window.TurnoManager), 'fail');
            }
        }

        function testFunctions() {
            log('â•'.repeat(50), 'info');
            log('TEST: Funciones de TurnoManager', 'info');
            log('â•'.repeat(50), 'info');
            
            if (!window.TurnoManager) {
                log('âŒ TurnoManager no existe', 'fail');
                return;
            }

            const funciones = [
                'inicializarDatos',
                'reiniciarDatos',
                'generarTurnosEmpleado',
                'esCuadranteVacio',
                'mostrarModalGeneracion',
                'cerrarModalGeneracion',
                'generarTurnos',
                'verificarYMostrarBoton',
                'cargarTurnosPorDefecto'
            ];

            funciones.forEach(fn => {
                const existe = typeof window.TurnoManager[fn] === 'function';
                const icon = existe ? 'âœ…' : 'âŒ';
                const type = existe ? 'pass' : 'fail';
                log(`${icon} ${fn}: ${existe ? 'function' : typeof window.TurnoManager[fn]}`, type);
            });
        }

        function testEsCuadranteVacio() {
            log('â•'.repeat(50), 'info');
            log('TEST: esCuadranteVacio()', 'info');
            log('â•'.repeat(50), 'info');
            
            try {
                if (!window.TurnoManager) {
                    log('âŒ TurnoManager no existe', 'fail');
                    return;
                }
                
                if (typeof window.TurnoManager.esCuadranteVacio !== 'function') {
                    log('âŒ esCuadranteVacio no es funciÃ³n', 'fail');
                    return;
                }
                
                const resultado = window.TurnoManager.esCuadranteVacio();
                log(`âœ… esCuadranteVacio() ejecutado`, 'pass');
                log(`Resultado: ${resultado}`, 'info');
            } catch (err) {
                log(`âŒ ERROR: ${err.message}`, 'fail');
                log(err.stack, 'fail');
            }
        }

        function testModals() {
            log('â•'.repeat(50), 'info');
            log('TEST: Elementos en DOM', 'info');
            log('â•'.repeat(50), 'info');
            
            const elements = [
                'btnGenerarTurnos',
                'modalGeneracionTurnos',
                'infoMesGeneracion',
                'infoAnioGeneracion',
                'resumenEmpleados',
                'resumenTurnos'
            ];
            
            elements.forEach(id => {
                const elem = document.getElementById(id);
                if (elem) {
                    log(`âœ… #${id} ENCONTRADO`, 'pass');
                } else {
                    log(`âŒ #${id} NO ENCONTRADO`, 'fail');
                }
            });
        }

        // Ejecutar test al cargar
        window.addEventListener('load', () => {
            log('ğŸŸ¢ PÃ¡gina cargada', 'pass');
            log('Click en botones para ejecutar tests', 'info');
        });
    </script>
</body>
</html>
